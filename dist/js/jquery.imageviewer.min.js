!function(a){var t={interfaceTop:!0,interfaceNav:!0,loadAtStart:2};a.fn.imageViewer=function(e){if(0===this.length)return this;var i={},s=this;i.settings=a.extend({},t,e),i.images=s.children(".image"),i.firstImage=i.images.slice(0,1),i.numImages=i.images.length,i.currentImage=s.children(".active");var n=function(){i.settings.interfaceTop&&r("top"),i.settings.interfaceNav&&r("nav"),o(i.firstImage,!0),l(i.firstImage),i.settings.loadAtStart>2&&(i.settings.loadAtStart>i.numImages&&(i.settings.loadAtStart=i.numImages),o(i.images.slice(2,i.settings.loadAtStart),!1)),a(".image").bind("click",function(t){t.preventDefault(),h(a(this))}),a(".nav-item").bind("click",function(t){t.preventDefault(),l(a(this).hasClass("next")?c():g())})},r=function(a){"top"==a&&s.before('<section id="top" class="interface"><ul class="details"><li class="image-title"><span class="value"></span><li class="image-src"><span class="label">Filename:</span> <span class="value"></span><li class="image-width"><span class="label">Width:</span> <span class="value"></span><li class="image-height"><span class="label">Height:</span> <span class="value"></span></ul></section>'),"nav"==a&&s.before('<section id="nav" class="interface"><a href="#" class="nav-item prev">Previous</a><a href="#" class="nav-item next">Next</a></section>')},l=function(a){i.images.removeClass("active"),a.addClass("active"),d(a),o(c()),o(g())},c=function(){var t=a(".active").index();return t==i.numImages-1?a(".image").first():a(".active").next()},g=function(){var t=a(".active").index();return 0===t?a(".image").last():a(".active").prev()},d=function(t){var e={title:t.attr("data-title"),src:t.attr("data-src").replace(/^.*[\\\/]/,""),width:t.attr("data-orig-width"),height:t.attr("data-orig-height")};a(".image-title .value").text(e.title),a(".image-src .value").text(e.src),a(".image-width .value").text(e.width),a(".image-height .value").text(e.height)},h=function(t){var e=t.attr("data-orig-width"),i=t.attr("data-orig-height");t.hasClass("original")?(t.removeClass("original"),t.css("width","100%"),t.css("height","100%"),a(".interface").removeClass("hidden")):(t.addClass("original"),t.css("width",e+"px"),t.css("height",i+"px"),a(".interface").addClass("hidden"))},o=function(t,e){t.each(function(){var t=a(this),i=new Image;i.src=t.attr("data-src"),i.onload=function(){var a=i.width,s=i.height;t.attr("data-orig-width",a),t.attr("data-orig-height",s),t.css("background-image","url("+i.src+")"),t.addClass("loaded"),e&&d(t)}})};n()}}(jQuery);