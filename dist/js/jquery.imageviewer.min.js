!function(t){var a={selector:".image",interfaceTop:!0,interfaceNav:!0,keyboardNav:!0,loadAtStart:2};t.fn.imageViewer=function(e){if(0===t(this).length)return t(this);var i={},s=t(this);i.settings=t.extend({},a,e),i.images=s.children(i.settings.selector),i.firstImage=i.images.slice(0,1),i.numImages=i.images.length,i.currentImage=s.children(".active");var n=function(){i.settings.interfaceTop&&r("top"),i.settings.interfaceNav&&r("nav"),u(i.firstImage,!0),c(i.firstImage),i.settings.loadAtStart>2&&(i.settings.loadAtStart>i.numImages&&(i.settings.loadAtStart=i.numImages),u(i.images.slice(2,i.settings.loadAtStart),!1)),t(i.settings.selector).bind("click",function(a){a.preventDefault(),h(t(this))}),t(".nav-item").bind("click",function(a){a.preventDefault(),c(t(this).hasClass("next")?l():g())}),i.settings.keyboardNav&&t(document).keydown(function(t){37==t.keyCode?c(g()):39==t.keyCode&&c(l())}),t(window).resize(function(){var t=s.width(),a=s.height();o(s.find(".active"),t,a)})},r=function(t){"top"==t&&s.before('<section id="top" class="interface"><ul class="details"><li class="image-title"><span class="value"></span><li class="image-src"><span class="label">Filename:</span> <span class="value"></span><li class="image-width"><span class="label">Width:</span> <span class="value"></span><li class="image-height"><span class="label">Height:</span> <span class="value"></span><li class="image-scale"><span class="label">Scale:</span> <span class="value"></span></ul></section>'),"nav"==t&&s.before('<section id="nav" class="interface"><a href="#" class="nav-item prev">Previous</a><a href="#" class="nav-item next">Next</a></section>')},c=function(a){i.images.removeClass("active"),a.addClass("active"),t(window).trigger("resize"),u(l()),u(g())},l=function(){var a=t(".active").index();return a==i.numImages-1?t(i.settings.selector).first():t(".active").next()},g=function(){var a=t(".active").index();return 0===a?t(i.settings.selector).last():t(".active").prev()},o=function(a,e,i){var s={title:a.attr("data-title"),src:a.attr("data-src").replace(/^.*[\\\/]/,""),width:a.attr("data-orig-width"),height:a.attr("data-orig-height"),scale:d(a,e,i)};t(".image-title .value").text(s.title),t(".image-src .value").text(s.src),t(".image-width .value").text(s.width),t(".image-height .value").text(s.height),t(".image-scale .value").text(s.scale)},d=function(t,a,e){var i,s=a,n=e,r=t.attr("data-orig-width"),c=t.attr("data-orig-height"),l=s/n,g=r/c;return i=1>g?l>g?n/c:s/r:g>l?s/r:n/c,Math.round(100*i)+"%"},h=function(a){var e=a.attr("data-orig-width"),i=a.attr("data-orig-height");a.hasClass("original")?(a.removeClass("original"),a.css("width","100%"),a.css("height","100%"),t(".interface").removeClass("hidden")):(a.addClass("original"),a.css("width",e+"px"),a.css("height",i+"px"),t(".interface").addClass("hidden"))},u=function(a,e){a.each(function(){var a=t(this),i=new Image;i.src=a.attr("data-src"),i.onload=function(){var s=i.width,n=i.height;a.attr("data-orig-width",s),a.attr("data-orig-height",n),a.css("background-image","url("+i.src+")"),a.addClass("loaded"),e&&t(window).trigger("resize")}})};return s.each(function(){n()})}}(jQuery);